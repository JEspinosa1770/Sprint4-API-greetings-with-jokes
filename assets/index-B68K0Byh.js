(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))c(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const l of r.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&c(l)}).observe(document,{childList:!0,subtree:!0});function n(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerPolicy&&(r.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?r.credentials="include":o.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function c(o){if(o.ep)return;o.ep=!0;const r=n(o);fetch(o.href,r)}})();async function p(e){try{const t=await fetch(e,{headers:{Accept:"application/json"}});if(!t.ok)throw new Error(`Error HTTP: ${t.status}`);return await t.json()}catch(t){console.error("Hubo un problema con la operación fetch: ",t)}}let s=[];function h(e){document.querySelector(".joke").innerHTML=`
    <div>
      <h3>"${e}"</h3>
    </div>
  `}function m(e,t){const n=e.currentTarget,c=parseInt(n.getAttribute("data-value")||"0");return t.forEach(o=>{o.classList.remove("selected")}),n.classList.add("selected"),i(!1),c}function v(e){return s.findIndex(t=>t.joke==e)}function i(e){let t=document.getElementById("message__vote");e?t.textContent="Has votat":t.textContent=""}function y(e,t){try{if(e==="")throw new Error("Error en grabación de datos");const n=new Date().toISOString(),c={joke:e,score:t,date:n},o=v(e);o>=0?s[o].score=t:s.push(c),i(!0);const r=`${c.date} - S'ha votat l'acudit ${c.joke} amb una puntuació de ${c.score}. Contingut actual de l'array d'acudits: `;return console.clear(),console.log(r),console.log(s),!0}catch(n){return console.error("Hubo un problema: ",n),!1}}const b=document.querySelector(".btn__next-joke"),k=document.querySelector(".btn__vote-joke"),g="https://icanhazdadjoke.com/";let a="";p(g).then(e=>{h(e.joke),a=e.joke});b?.addEventListener("click",()=>{p(g).then(e=>{h(e.joke),a=e.joke,i(!1)})});k?.addEventListener("click",e=>{e.preventDefault(),a.length>0?y(a,d):console.warn("No se puede votar. Esperando la carga del chiste.")});const u=document.querySelectorAll(".btn__select");let d=0,f=!0;if(f){const e=document.querySelector('.btn__select[data-value="2"]');e&&(d=m({currentTarget:e},u),f=!1)}u.forEach(e=>{e.addEventListener("click",t=>d=m(t,u))});
